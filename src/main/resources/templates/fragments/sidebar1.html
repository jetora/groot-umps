<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<body>
<div th:fragment="sidebar1">
    <div class="col-md-3 left_col">
        <div class="left_col scroll-view">
            <div class="container">
                <div class="navbar nav_title" style="border: 0;">
                    <a href="" class="site_title"><i class="fa fa-paw"></i> <span>Gentelella Alela!</span></a>
                </div>

                <div class="clearfix"></div>
                <!-- menu profile quick info -->
                <div class="profile clearfix">
                    <div class="profile_pic">
                        <img src="../../static/img/img.jpg" alt="..." class="img-circle profile_img">
                    </div>
                    <div class="profile_info">
                        <span>Welcome,</span>
                        <h2>Daenerys Targaryen</h2>
                    </div>
                </div>
                <!-- /menu profile quick info -->

                <br />
                <!-- sidebar menu -->
                <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
                    <div class="menu_section">
                        <h3>General</h3>
                        <div class="sidebar-nav navbar-collapse" id="side-menu">
                            <!-- 菜单在这里显示 -->
                            <!--<ul class="nav metismenu sidebar-menu" id="side-menu">
                            </ul>-->
                        </div>
                    </div>
                </div>
                <!-- /sidebar menu -->
                <!-- /menu footer buttons -->
                <div class="sidebar-footer hidden-small">
                    <a data-toggle="tooltip" data-placement="top" title="Settings">
                        <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
                    </a>
                    <a data-toggle="tooltip" data-placement="top" title="FullScreen">
                        <span class="glyphicon glyphicon-fullscreen" aria-hidden="true"></span>
                    </a>
                    <a data-toggle="tooltip" data-placement="top" title="Lock">
                        <span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>
                    </a>
                    <a data-toggle="tooltip" data-placement="top" title="Logout" href="login">
                        <span class="glyphicon glyphicon-off" aria-hidden="true"></span>
                    </a>
                </div>
                <!-- /menu footer buttons -->
            </div>
        </div>
    </div>

</div>
<!-- jQuery -->
<script src="../../static/js/jquery.min.js" th:src="@{/static/js/jquery.min.js}"></script>
<script type="text/javascript" th:inline="javascript">
    $(document).ready(function() {
        $.ajax({
            url : '/api/menutree',
            method : 'get',
            cache: false,
            async: true,
            dataType : 'json',
            success : function(ret) {
                if (ret.code == 200) {
                    var result = $('<ul class="nav side-menu"></ul>')
                    showall(ret.data[0].children,result);

                    $("#side-menu").append(result);
                    $('#side-menu').metisMenu();
                    f()
                }
            },
            error:function(ret){
                var item='';
                item="<span style='color:red;'>无数据，请联系管理员！！！</span>"
                var root = $('.sidebar-menu');
                root.append(item);
                $('#side-menu').metisMenu();
            }
        })
    })

    function f() {
        $("div#side-menu [data-url]").each(function () {
            $(this).on('click', function(event){
                event.preventDefault();
                var $this = $(this);
                var url = $this.attr('data-url');
                if (typeof url !== "undefined") {
                    if (url != '#') {
                        console.log(url);
                    }
                }
            });
        })
    }
</script>
</body>
</html>